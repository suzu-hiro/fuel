<html lang="ja">
  <head>
    <meta charset="utf8" />
    <meta name="robots" content="noindex">
    <link rel="shortcut icon" href="../favicon.png">
    <link rel="stylesheet" type="text/css" href="../assets/css/common.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/dialog.css">
    <link href="../lib/prism/prism.css" rel="stylesheet" /> 
    <script defer src="../assets/js/dialog.js"></script>
  </head>
  <body>
    <h1 class="title">HTML ダイアログ <a href="../">TOP</a></h1>
    <main>
      <button id="open-button">ダイアログを開く</button>
      <button id="clear-button">クリア</button>
      <div style="margin-top: 10px;">
        <textarea id="output"></textarea>
      </div>
      <pre>
<code class="language-html">&lt;dialog id="dialog"&gt;
  &lt;header&gt;タイトル&lt;span class="close-icon"&gt;X&lt;/span&gt;&lt;/header&gt;
  &lt;section&gt;
    &lt;div&gt;何か書く&lt;/div&gt;
    &lt;textarea id="modal-text"&gt;&lt;/textarea&gt;
  &lt;/section&gt;
  &lt;div class="buttons"&gt;
    &lt;button id="close-button"&gt;閉じる&lt;/button&gt;
    &lt;button id="submit-button"&gt;保存&lt;/button&gt;
  &lt;/div&gt;
&lt;/dialog&gt;</code>
      </pre>
      <pre>
<code class="language-css">dialog {
  width: 400px;
  padding: 0;
  border: 0;
  border-radius: 5px;
  box-shadow: 0 0 5px rgba(0, 0, 0, .5);
}
dialog::backdrop {
  /* 背景を半透明のブラックにする */
  background-color: rgba(0, 0, 0, .1);
}</code>
      </pre>
      <pre>
<code class="language-javascript">const dialog = document.getElementById('dialog');
const openBtn = document.getElementById('open-button');
const closeBtn = document.getElementById('close-button');
const clearBtn = document.getElementById('clear-button');
const submitBtn = document.getElementById('submit-button');
const modalText = document.getElementById('modal-text');
const output = document.getElementById('output');
const closeIcon = document.getElementsByClassName('close-icon')[0];

// モーダルを開く
openBtn.addEventListener('click', () => {
  dialog.showModal();
}, false)

// モーダルを閉じる
closeBtn.addEventListener('click', () => {
  dialog.close();
  output.value += '[click] 閉じる\n';
}, false);
closeIcon.addEventListener('click', () => {
  dialog.close();
  output.value += '[click] X\n';
}, false);

// 保存ボタン
submitBtn.addEventListener('click', () => {
  dialog.close();
  output.value += '[click] 保存\n';
  output.value += modalText.value;
});

// モーダルが閉じられる
dialog.addEventListener('close', function(event){
  modalText.value = '';
  output.value += '[dialog event] close' + '\n'
});

// escでキャンセル
dialog.addEventListener('cancel', function(event){
  output.value += '[dialog event] cancel' + '\n'
});

clearBtn.addEventListener('click', () => {
  output.value = '';
}, false)</code>
      </pre>
      <dialog id="dialog">
        <header>タイトル<span class="close-icon">X</span></header>
        <section>
          <div>何か書く</div>
          <textarea id="modal-text"></textarea>
        </section>
        <div class="buttons">
          <button id="close-button">閉じる</button>
          <button id="submit-button">保存</button>
        </div>
      </dialog>
    </main>
    <script src="../lib/prism/prism.js"></script>
  </body>
</html>